# ๐ง AI Test Planner - ะัะบะพะฒะพะดััะฒะพ ะฟะพ ะฟะฐะผััะธ

## ๐ฏ ะะฑะทะพั ัะฟัะพัะตะฝะฝะพะน ัะธััะตะผั

ะะพัะปะต ัะตัะฐะบัะพัะธะฝะณะฐ ัะธััะตะผะฐ ะธัะฟะพะปัะทัะตั **ะฟัะพัััั in-memory ะฟะฐะผััั** ะฒะผะตััะพ ัะปะพะถะฝัั PostgreSQL checkpoints.

## ๐๏ธ ะงัะพ ะฑัะปะพ ัะดะฐะปะตะฝะพ

### โ ะกะปะพะถะฝัะต ัะฐะฑะปะธัั (ัะดะฐะปะตะฝั ะธะท PostgreSQL):
- `checkpoints` - ััะฐะฝะตะฝะธะต ัะพััะพัะฝะธะน LangGraph
- `checkpoint_blobs` - ะฑะธะฝะฐัะฝัะต ะดะฐะฝะฝัะต ัะพััะพัะฝะธะน  
- `checkpoint_writes` - ะถััะฝะฐะป ะธะทะผะตะฝะตะฝะธะน
- `checkpoint_migrations` - ััะตะผะฐ ะผะธะณัะฐัะธะน

### โ ะกะปะพะถะฝะฐั ะปะพะณะธะบะฐ:
- Persistent threads
- Cross-session memory
- ะกะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ
- "Session has X total responses"

## โ ะงัะพ ะพััะฐะปะพัั

### ๐ ะขะฐะฑะปะธัั ะฒ PostgreSQL (ัะพะปัะบะพ ะดะปั TestDB):
- `test_results` - ัะตะทัะปััะฐัั C++ ัะตััะพะฒ 
- `actual_tests` - ะผะตัะฐะดะฐะฝะฝัะต C++ ัะตััะพะฒ

### ๐ง ะัะพััะฐั ะฟะฐะผััั:
- **InMemoryStore** - ััะฐะฝะตะฝะธะต ะฒ ัะฐะผะบะฐั ะพะดะฝะพะณะพ ะทะฐะฟััะบะฐ
- **ChatTool.conversation_history** - ะฟะพัะปะตะดะฝะธะต 5 ะฒะทะฐะธะผะพะดะตะนััะฒะธะน
- **ะะดะฝะฐ ัะตััะธั**: `default_session`
- **ะะดะธะฝ ะฟะพะปัะทะพะฒะฐัะตะปั**: `default_user`

## ๐ง ะะฐะบ ัะฐะฑะพัะฐะตั ะฟะฐะผััั

### 1. **ะะฐะฟััะบ ัะธััะตะผั**
```python
# ะกะพะทะดะฐะตััั ะฟัะพััะฐั ะฟะฐะผััั
checkpointer = InMemorySaver()  # ะ ัะฐะผะบะฐั ะทะฐะฟััะบะฐ
store = InMemoryStore()         # ะัะพััะพะต ััะฐะฝะธะปะธัะต

# ะะดะฝะฐ ัะตััะธั ะดะปั ะฒัะตั
thread_id = "default_session"
user_id = "default_user"
```

### 2. **ChatTool ะฟะฐะผััั**
```python
class ChatTool:
    def __init__(self, user_task: str):
        self.conversation_history = []  # ะัััะฐั ะธััะพัะธั
    
    def add_to_history(self, interaction: str):
        self.conversation_history.append(interaction)
        
        # ะขะพะปัะบะพ ะฟะพัะปะตะดะฝะธะต 5 ะฒะทะฐะธะผะพะดะตะนััะฒะธะน
        if len(self.conversation_history) > 5:
            self.conversation_history = self.conversation_history[-5:]
```

### 3. **ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะธััะพัะธะธ**
```python
def generate_response(self, question: str):
    # ะะตัะตะผ ะฟะพัะปะตะดะฝะธะต 5 ะฒะทะฐะธะผะพะดะตะนััะฒะธะน ะดะปั ะบะพะฝัะตะบััะฐ
    history_context = ""
    if self.conversation_history:
        history_context = "\n".join(self.conversation_history[-5:])
    
    # ะัะฟัะฐะฒะปัะตะผ ะฒ OpenAI ะฒะผะตััะต ั ะฒะพะฟัะพัะพะผ
    user_prompt = f"""
    User question: "{question}"
    Recent conversation history:
    {history_context}
    """
```

## ๐ ะััะธัะตะบัััะฐ ะฟะฐะผััะธ

```
โโโโ AI Test Planner โโโโ
โ                       โ
โ โโโโ ChatTool โโโโโโโ โ
โ โ conversation_historyโ โ  โ ๐ง ะะะะฏะขะฌ (ะผะฐะบัะธะผัะผ 5 ัะปะตะผะตะฝัะพะฒ)
โ โ [                  โ โ
โ โ   "Q: ะฟัะธะฒะตั",     โ โ
โ โ   "A: ะัะธะฒะตั!..",  โ โ
โ โ   "Q: ะบะฐะบ ะดะตะปะฐ?",  โ โ
โ โ   "A: ะฅะพัะพัะพ!.."   โ โ
โ โ ]                  โ โ
โ โโโโโโโโโโโโโโโโโโโโโโ โ
โ                       โ
โ โโโโ PostgreSQL โโโโโ โ
โ โ test_results      โ โ  โ ๐ ะะะะะซะ (ะดะปั TestDB ัะทะปะพะฒ)
โ โ actual_tests      โ โ
โ โโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ะะธะทะฝะตะฝะฝัะน ัะธะบะป ะฟะฐะผััะธ

### **ะะฐะฟััะบ 1**: `python ai_test_planner.py "ะฟัะธะฒะตั"`
```
1. ะกะพะทะดะฐะตััั ChatTool ั ะฟัััะพะน ะธััะพัะธะตะน: []
2. ะัะฟะพะปะฝัะตััั Chat ัะทะตะป
3. ะะพะฑะฐะฒะปัะตััั ะฒ ะธััะพัะธั: ["Q: ะฟัะธะฒะตั", "A: ะัะธะฒะตั!.."]
4. โ ะะพัะปะต ะทะฐะฒะตััะตะฝะธั ะฟัะพะณัะฐะผะผั ะธััะพัะธั ะขะะะฏะะขะกะฏ
```

### **ะะฐะฟััะบ 2**: `python ai_test_planner.py "ะบะฐะบ ะดะตะปะฐ?"`
```
1. ะกะพะทะดะฐะตััั ะะะะซะ ChatTool ั ะฟัััะพะน ะธััะพัะธะตะน: []
2. โ ะัะตะดัะดััะธะน ะดะธะฐะปะพะณ ะะ ะะะะะะขะกะฏ
3. ะะพ ChatTool ัะผะตะตั ะพัะฒะตัะฐัั ะฝะฐ "ััะพ ั ัะพะปัะบะพ ััะพ ัะฟัะพัะธะป?" ะธะท ะบะพะฝัะตะบััะฐ
```

## ๐ฏ ะัะฐะบัะธัะตัะบะธะต ะฟัะธะผะตัั

### โ **ะงัะพ ัะฐะฑะพัะฐะตั ะฒ ัะฐะผะบะฐั ะพะดะฝะพะณะพ ะทะฐะฟััะบะฐ:**
```bash
# ะัะปะธ ะฟะปะฐะฝ ัะพะดะตัะถะธั ะฝะตัะบะพะปัะบะพ Chat ัะทะปะพะฒ ะฒ ะพะดะฝะพะผ ะณัะฐัะต
{
  "nodes": [
    {"id": "chat1", "type": "Chat", "params": {"question": "ะฟัะธะฒะตั"}},
    {"id": "chat2", "type": "Chat", "params": {"question": "ะบะฐะบ ะดะตะปะฐ?"}}
  ],
  "edges": [{"source": "chat1", "target": "chat2"}]
}

# chat2 ะฑัะดะตั ะฒะธะดะตัั ะธััะพัะธั ะพั chat1
```

### โ **ะงัะพ ะะ ัะฐะฑะพัะฐะตั ะผะตะถะดั ะทะฐะฟััะบะฐะผะธ:**
```bash
# ะะฐะฟััะบ 1
python ai_test_planner.py "ะผะตะฝั ะทะพะฒัั ะะฒะฐะฝ"

# ะะฐะฟััะบ 2 
python ai_test_planner.py "ะบะฐะบ ะผะตะฝั ะทะพะฒัั?"
# โ ะกะธััะตะผะฐ ะะ ะฟะพะผะฝะธั "ะะฒะฐะฝ"
```

### โ **ะงัะพ ัะฐะฑะพัะฐะตั ะฑะปะฐะณะพะดะฐัั LLM:**
```bash
python ai_test_planner.py "ััะพ ั ัะพะปัะบะพ ััะพ ัะฟัะพัะธะป?"
# โ ChatTool ะฟะพะฝะธะผะฐะตั ะบะพะฝัะตะบัั ะธ ะผะพะถะตั ะพัะฒะตัะธัั ัะฐะทัะผะฝะพ
```

## ๐๏ธ ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### **InMemorySaver**
- ะฅัะฐะฝะธั ัะพััะพัะฝะธะต LangGraph ะฒ ัะฐะผะบะฐั ะพะดะฝะพะณะพ ะทะฐะฟััะบะฐ
- ะะพะทะฒะพะปัะตั ัะทะปะฐะผ ะฟะตัะตะดะฐะฒะฐัั ะดะฐะฝะฝัะต ะดััะณ ะดััะณั
- ะะต ัะพััะฐะฝัะตััั ะผะตะถะดั ะทะฐะฟััะบะฐะผะธ

### **ChatTool.conversation_history**
- ะัะพััะพะน Python ัะฟะธัะพะบ ัััะพะบ
- ะะฐะบัะธะผัะผ 5 ัะปะตะผะตะฝัะพะฒ
- ะัะธัะฐะตััั ะฟัะธ ะบะฐะถะดะพะผ ะฝะพะฒะพะผ ะทะฐะฟััะบะต

### **PostgreSQL ะฟะพะดะบะปััะตะฝะธะต**
- ะัะฟะพะปัะทัะตััั ะขะะะฌะะ ะดะปั TestDB ัะทะปะพะฒ
- ะกะพะดะตัะถะธั ัะตััะพะฒัะต ะดะฐะฝะฝัะต C++
- ะะ ะธัะฟะพะปัะทัะตััั ะดะปั ะฟะฐะผััะธ ะดะธะฐะปะพะณะพะฒ

## ๐ ะะพะผะฐะฝะดั ะดะปั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

```bash
# ะัะพััะพะน ะดะธะฐะปะพะณ
python ai_test_planner.py "ะฟัะธะฒะตั"

# ะะพะฟัะพัั ะพ ะฟะฐะผััะธ (ัะฐะฑะพัะฐัั ะฑะปะฐะณะพะดะฐัั LLM)
python ai_test_planner.py "ััะพ ั ัะพะปัะบะพ ััะพ ัะฟัะพัะธะป?"

# ะะฐะฟัะพัั ะบ ัะตััะพะฒัะผ ะดะฐะฝะฝัะผ
python ai_test_planner.py "show me test results"

# ะะพะผะฐะฝะดั shell
python ai_test_planner.py "ะฟะพะบะฐะถะธ ัะฐะนะปั ะฒ ะฟะฐะฟะบะต logs"
```

## โก ะัะตะธะผััะตััะฒะฐ ัะฟัะพัะตะฝะฝะพะน ัะธััะตะผั

1. **ะัะพััะพัะฐ** - ะฝะตั ัะปะพะถะฝะพะน ะปะพะณะธะบะธ ัะตััะธะน
2. **ะกะบะพัะพััั** - ะฝะตั ะพะฑัะฐัะตะฝะธะน ะบ PostgreSQL ะดะปั ะฟะฐะผััะธ
3. **ะะฐะดะตะถะฝะพััั** - ะผะตะฝััะต ัะพัะตะบ ะพัะบะฐะทะฐ
4. **ะะพะฝััะฝะพััั** - ะปะตะณะบะพ ะฟะพะฝััั ะธ ะผะพะดะธัะธัะธัะพะฒะฐัั
5. **ะะพััะฐัะพัะฝะพััั** - ะฟะพะบััะฒะฐะตั 90% ัะปััะฐะตะฒ ะธัะฟะพะปัะทะพะฒะฐะฝะธั

## ๐ฏ ะัะพะณ

ะกะธััะตะผะฐ ัะตะฟะตัั ะธัะฟะพะปัะทัะตั **ะฟัะพัััั ะฒ-ะฟะฐะผััั ะผะพะดะตะปั** ะฒะผะตััะพ ัะปะพะถะฝัั persistent checkpoints. ะะฐะผััั ัะฐะฑะพัะฐะตั ะฒ ัะฐะผะบะฐั ะพะดะฝะพะณะพ ะทะฐะฟััะบะฐ, ะฝะพ ัะธััะตะผะฐ ะพััะฐะตััั ััะฝะบัะธะพะฝะฐะปัะฝะพะน ะฑะปะฐะณะพะดะฐัั ัะผะฝะพะผั ChatTool ะธ ะฒะพะทะผะพะถะฝะพััะธ ัะฐะฑะพัั ั ัะตััะพะฒัะผะธ ะดะฐะฝะฝัะผะธ ัะตัะตะท PostgreSQL. 