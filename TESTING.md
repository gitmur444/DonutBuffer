# üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DonutBuffer

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:**

### 1. üöÄ –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
./run-tests.sh

# –ö–æ—Ä–æ—Ç–∫–∏–π –∞–ª–∏–∞—Å
./test

# –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
./test unit

# –¢–æ–ª—å–∫–æ E2E —Ç–µ—Å—Ç—ã
./test e2e

# CLI –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
./test cli

# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
./test all -v
```

### 2. üîß –ß–µ—Ä–µ–∑ Makefile

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
make test

# –û—Ç–¥–µ–ª—å–Ω—ã–µ –≤–∏–¥—ã —Ç–µ—Å—Ç–æ–≤
make test-unit
make test-e2e
make test-cli
make test-verbose

# –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã (–ø—Ä—è–º–æ–π CTest)
make test-quick
make test-quick-verbose

# –°–ø—Ä–∞–≤–∫–∞
make help
```

### 3. ‚ö° –ü—Ä—è–º—ã–µ –∫–æ–º–∞–Ω–¥—ã (–µ—Å–ª–∏ —É–∂–µ —Å–æ–±—Ä–∞–Ω–æ)

```bash
# –ò–∑ –ø–∞–ø–∫–∏ build
cd build
ctest              # –≤—Å–µ —Ç–µ—Å—Ç—ã
ctest -V           # –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
./tests/ringbuffer_tests    # —Ç–æ–ª—å–∫–æ unit
./tests/e2e_buffer_tests ./BufferRunner  # —Ç–æ–ª—å–∫–æ e2e
```

## –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:

```bash
# –°–±–æ—Ä–∫–∞ —Å —Ç–µ—Å—Ç–∞–º–∏
make build-with-tests

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
./test
```

### –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏:

```bash
# –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
./test
```

## –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

### üìä Unit —Ç–µ—Å—Ç—ã
- –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å mutex/lockfree ring buffer
- –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ (–ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ, –ø—É—Å—Ç–æ–π –±—É—Ñ–µ—Ä)
- –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** ~85K items/sec (mutex), ~2.6M items/sec (lockfree)

### üåê E2E —Ç–µ—Å—Ç—ã
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ CLI
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
- –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö CLI —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### ‚ö° CLI —Ç–µ—Å—Ç—ã
- –ë–µ–Ω—á–º–∞—Ä–∫–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ mutex vs lockfree
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
DonutBuffer/
‚îú‚îÄ‚îÄ run-tests.sh         # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ test                 # –ö–æ—Ä–æ—Ç–∫–∏–π –∞–ª–∏–∞—Å
‚îú‚îÄ‚îÄ Makefile            # Make –∫–æ–º–∞–Ω–¥—ã
‚îú‚îÄ‚îÄ build/              # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–±–æ—Ä–∫–∏ —Å —Ç–µ—Å—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ringbuffer_tests      # Unit —Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ e2e_buffer_tests      # E2E —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ BufferRunner             # CLI –≤–µ—Ä—Å–∏—è
‚îî‚îÄ‚îÄ tests/              # –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ —Ç–µ—Å—Ç–æ–≤
    ‚îú‚îÄ‚îÄ ringbuffer_tests.cpp
    ‚îú‚îÄ‚îÄ e2e_buffer_tests.cpp
    ‚îî‚îÄ‚îÄ README.md
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–¢–∏–ø–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

| –¢–∏–ø —Ç–µ—Å—Ç–∞ | Mutex | Lockfree | –£—Å–∫–æ—Ä–µ–Ω–∏–µ |
|-----------|-------|----------|-----------|
| Unit (2P+2C) | 85K items/sec | 2.6M items/sec | **30x** |
| E2E (2P+2C) | 376K items/sec | 2.5M items/sec | **6.6x** |
| CLI (8P+8C) | - | 2.4M items/sec | - |

**–í—ã–≤–æ–¥:** Lockfree —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç mutex –≤–µ—Ä—Å–∏—é! 