#!/bin/bash
# üìä DonutBuffer CI/CD Monitor
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç venv –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CI/CD

set -e  # Exit on any error

echo "üìä DonutBuffer CI/CD Monitor"
echo "============================"

# Check if venv exists
if [ ! -d "venv" ]; then
    echo "‚ùå –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!"
    echo "üí° –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞: ./setup-github"
    exit 1
fi

# Check if setup was completed
if [ ! -f "github_mcp_server/check_cicd.py" ]; then
    echo "‚ùå CI/CD –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!"
    echo "üí° –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞: ./setup-github"
    exit 1
fi

# Activate venv
echo "üêç –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã..."
source venv/bin/activate

# Run CI/CD monitoring
echo "üîç –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ CI/CD –¥–ª—è DonutBuffer..."
python github_mcp_server/check_cicd.py

echo ""
echo "‚úÖ –ê–Ω–∞–ª–∏–∑ CI/CD –∑–∞–≤–µ—Ä—à–µ–Ω!"
echo "üí° –î–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:"
echo "   cursor-agent \"–∫–∞–∫–∏–µ —Ç–µ—Å—Ç—ã —É–ø–∞–ª–∏ –≤ DonutBuffer?\""
echo "   cursor-agent \"–∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ring buffer\"" 